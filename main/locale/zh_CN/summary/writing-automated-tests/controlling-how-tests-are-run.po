msgid ""
msgstr ""
"Project-Id-Version: The Rust Programming Language\n"
"POT-Creation-Date: 2025-11-29T06:49:36Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Language: zh_CN\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/ch11-02-running-tests.md:1
msgid "Controlling How Tests Are Run"
msgstr ""

#: src/ch11-02-running-tests.md:3
msgid ""
"Just as `cargo run` compiles your code and then runs the resultant binary, "
"`cargo test` compiles your code in test mode and runs the resultant test "
"binary. The default behavior of the binary produced by `cargo test` is to "
"run all the tests in parallel and capture output generated during test runs, "
"preventing the output from being displayed and making it easier to read the "
"output related to the test results. You can, however, specify command line "
"options to change this default behavior."
msgstr ""

#: src/ch11-02-running-tests.md:11
msgid ""
"Some command line options go to `cargo test`, and some go to the resultant "
"test binary. To separate these two types of arguments, you list the "
"arguments that go to `cargo test` followed by the separator `--` and then "
"the ones that go to the test binary. Running `cargo test --help` displays "
"the options you can use with `cargo test`, and running `cargo test -- --"
"help` displays the options you can use after the separator. These options "
"are also documented in [the “Tests” section of _The `rustc` Book_](https://"
"doc.rust-lang.org/rustc/tests/index.html)."
msgstr ""

#: src/ch11-02-running-tests.md:21
msgid "Running Tests in Parallel or Consecutively"
msgstr ""

#: src/ch11-02-running-tests.md:23
msgid ""
"When you run multiple tests, by default they run in parallel using threads, "
"meaning they finish running more quickly and you get feedback sooner. "
"Because the tests are running at the same time, you must make sure your "
"tests don’t depend on each other or on any shared state, including a shared "
"environment, such as the current working directory or environment variables."
msgstr ""

#: src/ch11-02-running-tests.md:29
msgid ""
"For example, say each of your tests runs some code that creates a file on "
"disk named _test-output.txt_ and writes some data to that file. Then, each "
"test reads the data in that file and asserts that the file contains a "
"particular value, which is different in each test. Because the tests run at "
"the same time, one test might overwrite the file in the time between when "
"another test is writing and reading the file. The second test will then "
"fail, not because the code is incorrect but because the tests have "
"interfered with each other while running in parallel. One solution is to "
"make sure each test writes to a different file; another solution is to run "
"the tests one at a time."
msgstr ""

#: src/ch11-02-running-tests.md:39
msgid ""
"If you don’t want to run the tests in parallel or if you want more fine-"
"grained control over the number of threads used, you can send the `--test-"
"threads` flag and the number of threads you want to use to the test binary. "
"Take a look at the following example:"
msgstr ""

#: src/ch11-02-running-tests.md:48
msgid ""
"We set the number of test threads to `1`, telling the program not to use any "
"parallelism. Running the tests using one thread will take longer than "
"running them in parallel, but the tests won’t interfere with each other if "
"they share state."
msgstr ""

#: src/ch11-02-running-tests.md:53
msgid "Showing Function Output"
msgstr ""

#: src/ch11-02-running-tests.md:55
msgid ""
"By default, if a test passes, Rust’s test library captures anything printed "
"to standard output. For example, if we call `println!` in a test and the "
"test passes, we won’t see the `println!` output in the terminal; we’ll see "
"only the line that indicates the test passed. If a test fails, we’ll see "
"whatever was printed to standard output with the rest of the failure message."
msgstr ""

#: src/ch11-02-running-tests.md:61
msgid ""
"As an example, Listing 11-10 has a silly function that prints the value of "
"its parameter and returns 10, as well as a test that passes and a test that "
"fails."
msgstr ""

#: src/ch11-02-running-tests.md:68
msgid "\"I got the value {a}\""
msgstr ""

#: src/ch11-02-running-tests.md:92
msgid ""
"When we run these tests with `cargo test`, we’ll see the following output:"
msgstr ""

#: src/ch11-02-running-tests.md:94
msgid ""
"```console\n"
"$ cargo test\n"
"   Compiling silly-function v0.1.0 (file:///projects/silly-function)\n"
"    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.58s\n"
"     Running unittests src/lib.rs (target/debug/deps/"
"silly_function-160869f38cff9166)\n"
"\n"
"running 2 tests\n"
"test tests::this_test_will_fail ... FAILED\n"
"test tests::this_test_will_pass ... ok\n"
"\n"
"failures:\n"
"\n"
"---- tests::this_test_will_fail stdout ----\n"
"I got the value 8\n"
"\n"
"thread 'tests::this_test_will_fail' panicked at src/lib.rs:19:9:\n"
"assertion `left == right` failed\n"
"  left: 10\n"
" right: 5\n"
"note: run with `RUST_BACKTRACE=1` environment variable to display a "
"backtrace\n"
"\n"
"\n"
"failures:\n"
"    tests::this_test_will_fail\n"
"\n"
"test result: FAILED. 1 passed; 1 failed; 0 ignored; 0 measured; 0 filtered "
"out; finished in 0.00s\n"
"\n"
"error: test failed, to rerun pass `--lib`\n"
"```"
msgstr ""

#: src/ch11-02-running-tests.md:124
msgid ""
"Note that nowhere in this output do we see `I got the value 4`, which is "
"printed when the test that passes runs. That output has been captured. The "
"output from the test that failed, `I got the value 8`, appears in the "
"section of the test summary output, which also shows the cause of the test "
"failure."
msgstr ""

#: src/ch11-02-running-tests.md:129
msgid ""
"If we want to see printed values for passing tests as well, we can tell Rust "
"to also show the output of successful tests with `--show-output`:"
msgstr ""

#: src/ch11-02-running-tests.md:136
msgid ""
"When we run the tests in Listing 11-10 again with the `--show-output` flag, "
"we see the following output:"
msgstr ""

#: src/ch11-02-running-tests.md:139
msgid ""
"```console\n"
"$ cargo test -- --show-output\n"
"   Compiling silly-function v0.1.0 (file:///projects/silly-function)\n"
"    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.60s\n"
"     Running unittests src/lib.rs (target/debug/deps/"
"silly_function-160869f38cff9166)\n"
"\n"
"running 2 tests\n"
"test tests::this_test_will_fail ... FAILED\n"
"test tests::this_test_will_pass ... ok\n"
"\n"
"successes:\n"
"\n"
"---- tests::this_test_will_pass stdout ----\n"
"I got the value 4\n"
"\n"
"\n"
"successes:\n"
"    tests::this_test_will_pass\n"
"\n"
"failures:\n"
"\n"
"---- tests::this_test_will_fail stdout ----\n"
"I got the value 8\n"
"\n"
"thread 'tests::this_test_will_fail' panicked at src/lib.rs:19:9:\n"
"assertion `left == right` failed\n"
"  left: 10\n"
" right: 5\n"
"note: run with `RUST_BACKTRACE=1` environment variable to display a "
"backtrace\n"
"\n"
"\n"
"failures:\n"
"    tests::this_test_will_fail\n"
"\n"
"test result: FAILED. 1 passed; 1 failed; 0 ignored; 0 measured; 0 filtered "
"out; finished in 0.00s\n"
"\n"
"error: test failed, to rerun pass `--lib`\n"
"```"
msgstr ""

#: src/ch11-02-running-tests.md:178
msgid "Running a Subset of Tests by Name"
msgstr ""

#: src/ch11-02-running-tests.md:180
msgid ""
"Running a full test suite can sometimes take a long time. If you’re working "
"on code in a particular area, you might want to run only the tests "
"pertaining to that code. You can choose which tests to run by passing `cargo "
"test` the name or names of the test(s) you want to run as an argument."
msgstr ""

#: src/ch11-02-running-tests.md:185
msgid ""
"To demonstrate how to run a subset of tests, we’ll first create three tests "
"for our `add_two` function, as shown in Listing 11-11, and choose which ones "
"to run."
msgstr ""

#: src/ch11-02-running-tests.md:221
msgid ""
"If we run the tests without passing any arguments, as we saw earlier, all "
"the tests will run in parallel:"
msgstr ""

#: src/ch11-02-running-tests.md:224
msgid ""
"```console\n"
"$ cargo test\n"
"   Compiling adder v0.1.0 (file:///projects/adder)\n"
"    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.62s\n"
"     Running unittests src/lib.rs (target/debug/deps/"
"adder-92948b65e88960b4)\n"
"\n"
"running 3 tests\n"
"test tests::add_three_and_two ... ok\n"
"test tests::add_two_and_two ... ok\n"
"test tests::one_hundred ... ok\n"
"\n"
"test result: ok. 3 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; "
"finished in 0.00s\n"
"\n"
"   Doc-tests adder\n"
"\n"
"running 0 tests\n"
"\n"
"test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; "
"finished in 0.00s\n"
"\n"
"```"
msgstr ""

#: src/ch11-02-running-tests.md:245
msgid "Running Single Tests"
msgstr ""

#: src/ch11-02-running-tests.md:247
msgid ""
"We can pass the name of any test function to `cargo test` to run only that "
"test:"
msgstr ""

#: src/ch11-02-running-tests.md:249
msgid ""
"```console\n"
"$ cargo test one_hundred\n"
"   Compiling adder v0.1.0 (file:///projects/adder)\n"
"    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.69s\n"
"     Running unittests src/lib.rs (target/debug/deps/"
"adder-92948b65e88960b4)\n"
"\n"
"running 1 test\n"
"test tests::one_hundred ... ok\n"
"\n"
"test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; "
"finished in 0.00s\n"
"\n"
"```"
msgstr ""

#: src/ch11-02-running-tests.md:262
msgid ""
"Only the test with the name `one_hundred` ran; the other two tests didn’t "
"match that name. The test output lets us know we had more tests that didn’t "
"run by displaying `2 filtered out` at the end."
msgstr ""

#: src/ch11-02-running-tests.md:266
msgid ""
"We can’t specify the names of multiple tests in this way; only the first "
"value given to `cargo test` will be used. But there is a way to run multiple "
"tests."
msgstr ""

#: src/ch11-02-running-tests.md:269
msgid "Filtering to Run Multiple Tests"
msgstr ""

#: src/ch11-02-running-tests.md:271
msgid ""
"We can specify part of a test name, and any test whose name matches that "
"value will be run. For example, because two of our tests’ names contain "
"`add`, we can run those two by running `cargo test add`:"
msgstr ""

#: src/ch11-02-running-tests.md:275
msgid ""
"```console\n"
"$ cargo test add\n"
"   Compiling adder v0.1.0 (file:///projects/adder)\n"
"    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.61s\n"
"     Running unittests src/lib.rs (target/debug/deps/"
"adder-92948b65e88960b4)\n"
"\n"
"running 2 tests\n"
"test tests::add_three_and_two ... ok\n"
"test tests::add_two_and_two ... ok\n"
"\n"
"test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 1 filtered out; "
"finished in 0.00s\n"
"\n"
"```"
msgstr ""

#: src/ch11-02-running-tests.md:289
msgid ""
"This command ran all tests with `add` in the name and filtered out the test "
"named `one_hundred`. Also note that the module in which a test appears "
"becomes part of the test’s name, so we can run all the tests in a module by "
"filtering on the module’s name."
msgstr ""

#: src/ch11-02-running-tests.md:296
msgid "<a id=\"ignoring-some-tests-unless-specifically-requested\"></a>"
msgstr ""

#: src/ch11-02-running-tests.md:298
msgid "Ignoring Tests Unless Specifically Requested"
msgstr ""

#: src/ch11-02-running-tests.md:300
msgid ""
"Sometimes a few specific tests can be very time-consuming to execute, so you "
"might want to exclude them during most runs of `cargo test`. Rather than "
"listing as arguments all tests you do want to run, you can instead annotate "
"the time-consuming tests using the `ignore` attribute to exclude them, as "
"shown here:"
msgstr ""

#: src/ch11-02-running-tests.md:306
msgid "<span class=\"filename\">Filename: src/lib.rs</span>"
msgstr ""

#: src/ch11-02-running-tests.md:326
msgid "// code that takes an hour to run\n"
msgstr ""

#: src/ch11-02-running-tests.md:331
msgid ""
"After `#[test]`, we add the `#[ignore]` line to the test we want to exclude. "
"Now when we run our tests, `it_works` runs, but `expensive_test` doesn’t:"
msgstr ""

#: src/ch11-02-running-tests.md:334
msgid ""
"```console\n"
"$ cargo test\n"
"   Compiling adder v0.1.0 (file:///projects/adder)\n"
"    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.60s\n"
"     Running unittests src/lib.rs (target/debug/deps/"
"adder-92948b65e88960b4)\n"
"\n"
"running 2 tests\n"
"test tests::expensive_test ... ignored\n"
"test tests::it_works ... ok\n"
"\n"
"test result: ok. 1 passed; 0 failed; 1 ignored; 0 measured; 0 filtered out; "
"finished in 0.00s\n"
"\n"
"   Doc-tests adder\n"
"\n"
"running 0 tests\n"
"\n"
"test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; "
"finished in 0.00s\n"
"\n"
"```"
msgstr ""

#: src/ch11-02-running-tests.md:354
msgid ""
"The `expensive_test` function is listed as `ignored`. If we want to run only "
"the ignored tests, we can use `cargo test -- --ignored`:"
msgstr ""

#: src/ch11-02-running-tests.md:357
msgid ""
"```console\n"
"$ cargo test -- --ignored\n"
"   Compiling adder v0.1.0 (file:///projects/adder)\n"
"    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.61s\n"
"     Running unittests src/lib.rs (target/debug/deps/"
"adder-92948b65e88960b4)\n"
"\n"
"running 1 test\n"
"test tests::expensive_test ... ok\n"
"\n"
"test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 1 filtered out; "
"finished in 0.00s\n"
"\n"
"   Doc-tests adder\n"
"\n"
"running 0 tests\n"
"\n"
"test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; "
"finished in 0.00s\n"
"\n"
"```"
msgstr ""

#: src/ch11-02-running-tests.md:376
msgid ""
"By controlling which tests run, you can make sure your `cargo test` results "
"will be returned quickly. When you’re at a point where it makes sense to "
"check the results of the `ignored` tests and you have time to wait for the "
"results, you can run `cargo test -- --ignored` instead. If you want to run "
"all tests whether they’re ignored or not, you can run `cargo test -- --"
"include-ignored`."
msgstr ""
